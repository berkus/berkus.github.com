<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Exocortex by berkus</title>

    <link rel="stylesheet" href="/stylesheets/styles.css">
    <link rel="stylesheet" href="/stylesheets/pygment_trac.css">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml" />
    <script src="/javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1><a href="/">Exocortex</a></h1>
        <p><a href="/about.html">scribbling for singularity</a></p>
      </header>
      <section>
       <p><a href="https://github.com/berkus/libssu">Structured Streams Unleashed</a> library is getting in shape.
With C++11 and Boost it's relatively simple to write even without the tremendous help of Qt.
Although I had to write some helpers which are factored into a separate library - grab
<a href="https://github.com/berkus/libsupport">libsupport</a> if you want - some nice things there are
byte_array, settings_provider, binary literals, hash_combine, make_unique, contains() predicate,
base32 encoder-decoder and opaque big/little endian integer types.</p>

<p>For example:</p>

<div class="highlight"><pre><code class="c++"><span class="kt">big_uint32_t</span> <span class="n">magic</span> <span class="o">=</span> <span class="mh">0xabbadead</span><span class="p">;</span>
<span class="c1">// magic will store data in network byte order in memory,</span>
<span class="c1">// and convert it as necessary for operations. You don&#39;t</span>
<span class="c1">// have to think about it at all.</span>

<span class="kt">int</span> <span class="n">bin_literal</span> <span class="o">=</span> <span class="mi">1010101</span><span class="n">_b</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">flags</span> <span class="o">=</span> <span class="mo">00001</span><span class="n">_b</span> <span class="o">|</span> <span class="mi">10100</span><span class="n">_b</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">masked</span> <span class="o">=</span> <span class="n">bin_literal</span> <span class="o">&amp;</span> <span class="mo">01110</span><span class="n">_b</span><span class="p">;</span>

<span class="n">byte_array</span> <span class="n">data</span><span class="p">{</span><span class="sc">&#39;h&#39;</span><span class="p">,</span><span class="sc">&#39;e&#39;</span><span class="p">,</span><span class="sc">&#39;l&#39;</span><span class="p">,</span><span class="sc">&#39;l&#39;</span><span class="p">,</span><span class="sc">&#39;o&#39;</span><span class="p">};</span>
<span class="k">auto</span> <span class="n">hell</span> <span class="o">=</span> <span class="n">data</span><span class="p">.</span><span class="n">left</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>

<span class="c1">// And so on...</span>
</code></pre></div>


<p>But enough about support libs, one of the major milestones is the ability to set up an encrypted
connection between two endpoints. This works reliably in the simulator, which is another good
feature. In the simulator you can define link properties, such as packet propagation delay, loss
rate between 0.0 and 1.0, set up host network of arbitrary complexity. It currently requires manual
set up of every link between the hosts, but I hope to simplify that a bit using some network
configuration helpers.</p>

<p>With an encrypted connecting set up, streams are firing off events on receive or substream activation.
There's still a lot to do, for example proper MTU configuration, congestion control, reliable
delivery timeouts and lots of small fixes, but I plan now to switch to porting the userspace
applications to use ssu streams and then flesh out the issues with a bunch of unit and integration
tests.</p>

<p>First target is opus-streaming app from mettanode. It's a simple audio-chat application and switching
it to ssu streams serves two purposes - I want to see how well ssu can handle real-time traffic and
part two, I haven't polished unreliable datagram sending too much, and this is what opus-stream uses,
so it will serve as a field test.</p>


<a href="/">Back to start</a>

      </section>
      <div class="wrap_disqus">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
          var disqus_shortname = 'exocortex';
          (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      </div>
    </div>
    
    <footer>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a>.</p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-36158006-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

    <script type="text/javascript">
      var disqus_shortname = 'exocortex';
      (function () {
          var s = document.createElement('script'); s.async = true;
          s.type = 'text/javascript';
          s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
          (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
      }());
    </script>
  </body>
</html>
